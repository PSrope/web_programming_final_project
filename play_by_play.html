<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf8">
        <title>Play By Play</title>
        <script src="https://kit.fontawesome.com/9a93ec8ea5.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link href="stylesheet/css.css" rel='stylesheet' type='text/css' />
        <link href="stylesheet/gaming.css" rel='stylesheet' type='text/css' />
        <script src="javascript/teams.js"></script>
        <script src="javascript/global_var.js"></script>
        <style>
            .score_board{
                display:table;
                overflow:auto;
                width: 97%;
                height: 100px;
                margin-top: 20px;
                margin-left: 1.5%;
            }
            .innings, .scoreboard, .bases{
                float: left;
                border: 1px black groove;
                width: 31%;
                height: 100%;
            }
            .innings, .scoreboard{
                font-family: fantasy;
                margin-right: calc(5% - 3px);
            }
            .innings {
                font-size: 30px;
                text-align: center;
                width: 10%;
                line-height: 100px;
                margin-left: 5%;
            }
            .scoreboard {
                width: 50%;
                margin-left: 5%;
                text-align: center;
            }
            .score_box {
                height: calc(70% - 2px);
                margin-bottom: 0px;
                font-size: 45px;
                padding-left: calc(49% - 166px);
                line-height: 63px;
            }
            .score_box img {
                height: 65px;
                width: 65px;
            }
            #team1, #team2, #score, #logo1, #logo2{
                float: left;
                margin-right: 15px;
                height: 100%;
            }
            #team1, #team2, #score {
                margin-top: 5px;
                height: 80%;
            }
            #outs {
                height: calc(30% - 2px);
                line-height: 30px;
                font-size: 20px;
            }
            .bases {
                width: 20%;
                border: none;
            }
            #base1, #base2, #base3 {
                width: 46px;
                height: 46px;
                float: left;
                position: relative;
                border-radius: 8px 8px 8px 8px;
                font-size: 50px;
                background-color: lightgray;
                transform:rotate(45deg);
                border: black 1px solid;
            }
     
            #base1 {
                left: 22%;
                top: 42%;
            }
            #base2 {
                left: 22%;
                top: 8%;
                background-color: yellow;
            }
            #base3 {
                left: 22%;
                top: 42%;
            }
            .List_A table, .List_A th, .List_A td {
                color: lightgray;
                text-align: center;
                border: 1px solid #000;
                background-color: rgb(165, 0, 0);
            }
            .List_B table, .List_B th, .List_B td {
                color: lightgray;
                text-align: center;
                border: 1px solid #000;
                background-color: rgb(0, 0, 165);
            }
            .gamePlace {
                position: relative;
                width: 96%;
                height: 65%;
                overflow:visible;
                margin: auto;
            }
            .gamePlace table{
               width: 100%;
               height: 100%;
            }
            .List_A {
                position: absolute;
                width: 20%;
                height: 100%;
                left: 0px;
            }
            .List_B {
                position: absolute;
                width: 20%;
                right: 0px;
                height: 100%;
            }
            #plays {
                width: 50%;
                position: absolute;
                top: 5%;
                bottom: 5%;
                left: 25%;
                height: 90%;
                background-color: rgb(226, 255, 60, 0.8);
                overflow: auto;
                border: black 2px solid;
            }
            #plays_table td{
                vertical-align: top;
            }
            #plays:hover {
                background-color: rgb(226, 255, 60, 1);
            }
            .submit-btn{
                float: right;
                margin-right: 20px;
            }
        </style>
        <script>
            function startgame(){
                for(var i = 0;i < 10;i++){
                    var avg = parseInt((teams.batting[orderA[i] + determinA] + teams.pitching[orderA[i] + determinA] + teams.fielding[orderA[i] + determinA]) / 3, 10);
                    document.getElementById("batterListA").innerHTML +=
                    "<tr><td>" + teams.place[orderA[i] + determinA] + "</td><td>" + teams.name[orderA[i] + determinA] + "</td><td>" + avg + "</td></tr>";
                }
                for(var i = 0;i < 10;i++){
                    var avg = parseInt((teams.batting[orderB[i] + determinB] + teams.pitching[orderB[i] + determinB] + teams.fielding[orderB[i] + determinB]) / 3, 10);
                    document.getElementById("batterListB").innerHTML += 
                    "<tr><td>" + teams.place[orderB[i] + determinB] + "</td><td>" + teams.name[orderB[i] + determinB] + "</td><td>" + avg + "</td></tr>";
                }
                document.getElementById("innings").innerHTML = "1 <i class='fas fa-caret-up'></i>";
                document.getElementById("logo1").innerHTML = "<img src='" + team_choiceA + ".jpg'></div>";
                document.getElementById("logo2").innerHTML = "<img src='" + team_choiceB + ".jpg'></div>";
                document.getElementById("outs").innerHTML = "<i class='far fa-circle'>&nbsp;</i><i class='far fa-circle'></i>&nbsp;&nbsp;outs";
                $("#base1").css("background-color", "lightgray");
                $("#base2").css("background-color", "lightgray");
                $("#base3").css("background-color", "lightgray");
                document.getElementById("plays_table").innerHTML = "<tr><td>比賽開始！！</td></tr><tr><td>1局上半</td></tr>";
                allcases();
            }
            function allcases(){
                while(1){
                    scoreA = 0;
                    scoreB = 0;
                    if(count_out == 1){
                        document.getElementById("outs").innerHTML = "<i class='fas fa-circle'>&nbsp;</i><i class='far fa-circle'></i>&nbsp;&nbsp;outs";
                    }
                    if(count_out == 2){
                        document.getElementById("outs").innerHTML = "<i class='fas fa-circle'>&nbsp;</i><i class='fas fa-circle'></i>&nbsp;&nbsp;outs";
                    }
                    if(count_out == 3){
                        count_out = 0;
                        document.getElementById("plays_table").innerHTML += "<tr><td>三人出局！</td></tr>";
                        $("#base1").css("background-color", "lightgray");
                        $("#base2").css("background-color", "lightgray");
                        $("#base3").css("background-color", "lightgray");
                        base_case = 0;
                        if(inning == 14){
                            document.getElementById("plays_table").innerHTML += "<tr><td>比賽結束！</td></tr>";
                            inning = 1
                            break;
                        } else {
                            document.getElementById("plays_table").innerHTML += "<tr><td>攻守交換！</td></tr><tr><td>" + " " + "</td></tr>";
                            if(inning % 2 == 0) {
                                document.getElementById("plays_table").innerHTML += "<tr><td>第" + (inning / 2) + "局結束</td></tr>";
                                document.getElementById("plays_table").innerHTML += "<tr><td>-----------------------------------------------------------------------------------------------</td></tr>";
                                document.getElementById("plays_table").innerHTML += "<tr><td>" + (inning / 2 + 1) + "局上半</td></tr>";
                            } else {
                                document.getElementById("plays_table").innerHTML += "<tr><td>" + ((inning + 1) / 2) + "局下半</td></tr>";
                            }
                            inning++;
                        }
                        document.getElementById("outs").innerHTML = "<i class='far fa-circle'>&nbsp;</i><i class='far fa-circle'></i>&nbsp;&nbsp;outs";
                    } else {
                        if(inning % 2 == 1){
                            if(count_batterA == 10){
                                count_batterA = 0;
                            }
                            document.getElementById("innings").innerHTML = (inning / 2 + 0.5) +  " <i class='fas fa-caret-up'></i>";
                            if(pitcher(teams.pitching[determinA])==1){
                                if(batter(teams.batting[orderA[count_batterA] + determinA])==1){
                                    case_type= hit(teams.batting[orderA[count_batterA] + determinA]);
                                    } else {
                                        document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 三振出局！！</td></tr>";
                                        count_out++;
                                        teams.AB[orderA[count_batterA] + determinA]++;
                                        teams.SO[orderA[count_batterA] + determinA]++;
                                        count_batterA++;
                                        case_type = -3 ;    //表示三振case
                                        base_case = basepush(base_case, case_type);
                                        scorecaculate();
                                        continue;
                                        //printf("strike!! out!!");
                                    }
                            } else {
                                document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 獲得四壞球保送</td></tr>";
                                teams.AB[orderA[count_batterA] + determinA]++;
                                teams.BB[orderA[count_batterA] + determinA]++;
                                count_batterA++;
                                case_type = -4;      //代表四壞case
                                base_case = basepush(base_case, case_type);
                                scorecaculate();
                                continue;
                            }
                            if(case_type > -1){
                                if(case_type==0){
                                    // ((1b acc)+(sf acc)+(rf acc))/3*0.3=擋住球的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + "打出一支一壘安打</td></tr>";
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    teams.H[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("1b hit!!");

                                    //1bhit(y=1) or 2bhit(y=2) orr 3bhit(y=3)
                                    //y=(rand()%3)+1;
                                }
                                else if(case_type==1){
                                    // ((2b acc)+(ss acc)+(cf acc))/3*0.3=擋住球的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + "揮出了一支二壘安打</td></tr>";
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    teams.H[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("2b hit!!");

                                    //lfhit(y=1) or cfhit(y=2) orr rfhit(y=3)
                                    //y=(rand()%3)+1;
                                }
                                else if(case_type==2){
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 全力揮擊!! 這是一支 全！壘！打！</td></tr>";
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    teams.H[orderA[count_batterA] + determinA]++;
                                    teams.HR[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("home run!!!");
                                }
                                else if(case_type==3){
                                    // cf acc*0.3=失誤的機率 IF CFE 1個壘包 以此類推

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打得很高，但是不夠遠，被中外野手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("cf fly!!");
                                }
                                else if(case_type==4){
                                      // lf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打高了，左外野手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("Lf fly!!");
                                }
                                else if(case_type==5){
                                      // rf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打了一個飛球，被右外野手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("Rf fly!!");
                                }
                                else if(case_type==6){
                                      // 3b acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打了個高射炮，被三壘手接殺</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("3B fly!!");
                                }
                                else if(case_type==7){
                                      // 2b acc*0.3=失誤的機率
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 沒掌握好，打成二壘方向滾地球被刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("2B roll!!");
                                }
                                else if(case_type==8){
                                      // sf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打穿二游，可惜被自由手攔截刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("sf roll!!");
                                }
                                else if(case_type==9)
                                {
                                      // ss acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 切到，形成游擊方向的滾地球被刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("ss roll!!");
                                }
                                else if(case_type==10)
                                {
                                      // p acc*0.3=失誤的機率
                                    
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打到投手前方被刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("p roll!!");
                                }
                                else if(case_type==11)
                                {
                                      // 1b acc*0.3=失誤的機率
                                    
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 一壘方向飛球被接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("1b fly!!");
                                }
                                else if(case_type==12)
                                {
                                      // 2b acc*0.3=失誤的機率
                                    
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打到二壘上空被接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("2b fly!!");
                                }
                                else if(case_type==13)
                                {
                                      // sf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打到內外野上方被自由手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("sf fly!!");
                                }
                                else if(case_type==14)
                                {
                                      // ss acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterA + 1) + "棒" + "  " +  teams.name[orderA[count_batterA] + determinA] + " 打到游擊上方被]接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderA[count_batterA] + determinA]++;
                                    count_batterA++;
                                    //printf("ss fly!!");
                                }
                            }
                                
                        }
                        else if(inning % 2 == 0){
                            if(count_batterB == 10){
                                    count_batterB = 0;
                                }
                            document.getElementById("innings").innerHTML = inning / 2 +  " <i class='fas fa-caret-down'></i>";
                            if(pitcher(teams.pitching[determinB])==1){
                                if(batter(teams.batting[orderB[count_batterB] + determinB])==1){
                                    case_type= hit(teams.batting[orderB[count_batterB] + determinB]);
                                } else {
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 三振出局！！</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    teams.SO[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    case_type = -3;
                                    base_case = basepush(base_case, case_type);
                                    scorecaculate();
                                    continue;
                                    //printf("strike!! out!!");
                                }
                            } else {
                                document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 獲得四壞球保送</td></tr>";
                                teams.AB[orderB[count_batterB] + determinB]++;
                                teams.BB[orderB[count_batterB] + determinB]++;
                                count_batterB++;
                                case_type = -4;
                                base_case = basepush(base_case, case_type);
                                scorecaculate();
                                continue;
                            }
                            if(case_type > -1){
                                if(case_type==0){
                                    // ((1b acc)+(sf acc)+(rf acc))/3*0.3=擋住球的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打出一支一壘安打</td></tr>";
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    teams.H[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("1b hit!!");
                                    

                                    //1bhit(y=1) or 2bhit(y=2) orr 3bhit(y=3)
                                    //y=(rand()%3)+1;
                                }
                                else if(case_type==1){
                                    // ((2b acc)+(ss acc)+(cf acc))/3*0.3=擋住球的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 揮出了一支二壘安打</td></tr>";
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    teams.H[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("2b hit!!");

                                    //lfhit(y=1) or cfhit(y=2) orr rfhit(y=3)
                                    //y=(rand()%3)+1;
                                }
                                else if(case_type==2){
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 全力揮擊!! 這是一支 全！壘！打！</td></tr>";
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    teams.H[orderB[count_batterB] + determinB]++;
                                    teams.HR[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("home run!!!");
                                }
                                else if(case_type==3){
                                    // cf acc*0.3=失誤的機率 IF CFE 1個壘包 以此類推

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打得很高，但是不夠遠，被中外野手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("cf fly!!");
                                }
                                else if(case_type==4){
                                      // lf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打高了，左外野手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("Lf fly!!");
                                }
                                else if(case_type==5){
                                      // rf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打了一個飛球，被右外野手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("Rf fly!!");
                                }
                                else if(case_type==6){
                                      // 3b acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打了個高射炮，被三壘手接殺</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("3B fly!!");
                                }
                                else if(case_type==7){
                                      // 2b acc*0.3=失誤的機率
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 沒掌握好，打成二壘方向滾地球被刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("2B roll!!");
                                }
                                else if(case_type==8){
                                      // sf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打穿二游，可惜被自由手攔截刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("sf roll!!");
                                }
                                else if(case_type==9)
                                {
                                      // ss acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 切到，形成游擊方向的滾地球被刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("ss roll!!");
                                }
                                else if(case_type==10)
                                {
                                      // p acc*0.3=失誤的機率
                                    
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打到投手前方被刺殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("p roll!!");
                                }
                                else if(case_type==11)
                                {
                                      // 1b acc*0.3=失誤的機率
                                    
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 一壘方向飛球被接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("1b fly!!");
                                }
                                else if(case_type==12)
                                {
                                      // 2b acc*0.3=失誤的機率
                                    
                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打到二壘上空被接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("2b fly!!");
                                }
                                else if(case_type==13)
                                {
                                      // sf acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打到內外野上方被自由手接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("sf fly!!");
                                }
                                else if(case_type==14)
                                {
                                      // ss acc*0.3=失誤的機率

                                    document.getElementById("plays_table").innerHTML += "<tr><td>第" + (count_batterB + 1) + "棒" + "  " +  teams.name[orderB[count_batterB] + determinB] + " 打到游擊上方被]接殺出局</td></tr>";
                                    count_out++;
                                    teams.AB[orderB[count_batterB] + determinB]++;
                                    count_batterB++;
                                    //printf("ss fly!!");
                                }
                            }
                        }
                    //////////////////////////////////////////////////
                        base_case = basepush(base_case, case_type);
                        basetype(base_case);
                        scorecaculate();
                    }
                }
                for(var i=0;i <10;i++){
                            scoreA += teams.RBI[determinA+i];
                            console.log(teams.RBI[determinA+i]);
                        }
            }

            function scorecaculate(){
                for(var i=0;i <10;i++){
                    scoreA += teams.RBI[determinA+i];
                }
                for(var i=0;i <10;i++){
                    scoreB += teams.RBI[determinB+i];
                }
                document.getElementById("score").innerHTML = "" + scoreA + " ： " + scoreB;
            }
            function pitcher(acc){
                var a, range;
                a = Math.floor(Math.random() * 100) + 1; //x=1~100
                range = 20 + acc / 10 * 8;
                if(a <= range){
                    return 1;
                }
                return 0;
            }
            function batter(str){
                var b, range;
                b = Math.floor(Math.random() * 100) + 1; //x=1~100
                range = 10 + str / 10 * 9;

                if(b <= range){
                    return 1;
                }
                else if(b > range){
                    return 0;
                }
            }
            function hit(str){
                var x,y;
                x = Math.floor(Math.random() * 100) + 1; //x=1~100
                if(1 <= x && x <= 10 && str >= 70){
                    return 2;// homerun
                }
                else if(20 <= x && x <= 35 && str >= 50){
                    return 1;//2b
                }
                else if(35 <= x && x <= 70){
                    return 0;//1b
                } else {
                    if(1 <= x && x <= 10){
                        y = Math.floor(Math.random() * 4) + 3;//y=3~6
                        return y;
                    }
                    else if(20 <= x && x <= 35){
                        y=Math.floor(Math.random() * 3) +7;//y=7~9
                        return y;
                    }
                    else{
                        y = Math.floor(Math.random() * 5) + 10; //y=10~14
                        return y;
                    }
                }
            }
            function basepush(base, type){
                if(base == 0) {
                    if(type == -3 || ( type >= 3 && type <= 14)){
                        return 0;
                    }
                    else if(type == -4 || type == 0){
                        return 1;
                    }
                    else if(type == 1){
                        
                        return 2;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 0;
                    }
                }
                else if(base == 1){
                    if(type == -3 || ( type >= 3 && type <= 14)){
                        return 1;
                    }
                    else if(type == -4 || type == 0){
                        return 4;
                    }
                    else if(type == 1){
                        return 6;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 2;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 2;
                        }
                        return 0;
                    }
                }
                else if(base == 2){
                    if(type == -3 || (type >= 6 && type <= 14) || type == 4){
                        return 2;
                    }
                    if(type == 3 || type == 5) {
                        return 3;
                    }
                    else if(type == -4){
                        return 4;
                    }
                    else if(type == 0){
                        return 5;
                    }
                    else if(type == 1){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 2;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 2;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 2;
                        }
                        return 0;
                    }
                }
                else if(base == 3){
                    if(type == -3 || (type >= 6 && type <= 14) || type == 4){
                        return 2;
                    }
                    if(type == 3 || type == 5) {
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 0;
                    }
                    else if(type == -4){
                        return 5;
                    }
                    else if(type == 0){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 1;
                    }
                    else if(type == 1){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 2;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 2;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 2;
                        }
                        return 0;
                    }
                }
                else if(base == 4){
                    if(type == -3 || (type >= 6 && type <= 14) || type == 4){
                        return 4;
                    }
                    if(type == 3 || type == 5) {
                        return 5;
                    }
                    else if(type == -4){
                        return 7;
                    }
                    else if(type == 0){
                        return 7;
                    }
                    else if(type == 1){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 6;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 3;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 3;
                        }
                        return 0;
                    }
                }
                else if(base == 5){
                    if(type == -3 || (type >= 6 && type <= 14) || type == 4){
                        return 5;
                    }
                    if(type == 3 || type == 5) {
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 1;
                    }
                    else if(type == -4){
                        return 7;
                    }
                    else if(type == 0){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 4;
                    }
                    else if(type == 1){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 6;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 3;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 3;
                        }
                        return 0;
                    }
                }
                else if(base == 6){
                    if(type == -3 || (type >= 6 && type <= 14) || type == 4){
                        return 6;
                    }
                    if(type == 3 || type == 5) {
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 3;
                    }
                    else if(type == -4){
                        return 7;
                    }
                    else if(type == 0){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 5;
                    }
                    else if(type == 1){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 2;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 2;
                        }
                        return 2;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 3;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 3;
                        }
                        return 0;
                    }
                }
                else if(base == 7){
                    if(type == -3 || (type >= 6 && type <= 14) || type == 4){
                        return 7;
                    }
                    if(type == 3 || type == 5) {
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 5;
                    }
                    else if(type == -4){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 7;
                    }
                    else if(type == 0){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA]++;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB]++;
                        }
                        return 7;
                    }
                    else if(type == 1){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 2;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 2;
                        }
                        return 6;
                    }
                    else if(type == 2){
                        if(inning % 2 == 1) {
                            teams.RBI[orderA[count_batterA - 1] + determinA] += 4;
                        } else {
                            teams.RBI[orderB[count_batterB - 1] + determinB] += 4;
                        }
                        return 0;
                    }
                }
            }

            function basetype(base_case){
                if(base_case == 0) {
                    $("#base1").css("background-color", "lightgray");
                    $("#base2").css("background-color", "lightgray");
                    $("#base3").css("background-color", "lightgray");
                }
                else if(base_case == 1){
                    $("#base1").css("background-color", "yellow");
                    $("#base2").css("background-color", "lightgray");
                    $("#base3").css("background-color", "lightgray");
                }
                else if(base_case == 2){
                    $("#base1").css("background-color", "lightgray");
                    $("#base2").css("background-color", "yellow");
                    $("#base3").css("background-color", "lightgray");
                }
                else if(base_case == 3){
                    $("#base1").css("background-color", "lightgray");
                    $("#base2").css("background-color", "lightgray");
                    $("#base3").css("background-color", "yellow");
                }
                else if(base_case == 4){
                    $("#base1").css("background-color", "yellow");
                    $("#base2").css("background-color", "yellow");
                    $("#base3").css("background-color", "lightgray");
                }
                else if(base_case == 5){
                    $("#base1").css("background-color", "yellow");
                    $("#base2").css("background-color", "lightgray");
                    $("#base3").css("background-color", "yellow");
                }
                else if(base_case == 6){
                    $("#base1").css("background-color", "lightgray");
                    $("#base2").css("background-color", "yellow");
                    $("#base3").css("background-color", "yellow");
                }
                else if(base_case == 7){
                    $("#base1").css("background-color", "yellow");
                    $("#base2").css("background-color", "yellow");
                    $("#base3").css("background-color", "yellow");
                }
            }
            
            window.addEventListener("load", startgame, false);
        </script>
    </head>

    <body>
        <h1 align="center"><font face="fantasy">Play By Play</font></h1>
        <div id="bgset">
            <div class="score_board">
                <div class="innings" id="innings">
                    1
                    <i class="fas fa-caret-up"></i>
                    <i class="fas fa-caret-down"></i>
                </div>

                <div class="scoreboard">
                    <div class="score_box">
                        <div id="logo1"><img src="CT.gif"></div>
                        <div id="team1" style="color: rgb(165, 0, 0);">R</div>
                        <div id="score">0 ： 0</div>
                        <div id="team2" style="color: rgb(0, 0, 165);">B</div>
                        <div id="logo2"><img src="TC.jpg"></div>
                    </div>

                    <div id="outs">
                        <i class="fas fa-circle"></i>
                        <i class="far fa-circle"></i>
                        &nbsp;&nbsp;outs
                    </div>
                </div>

                <div class="bases">
                    <div id="base3"></div>
                    <div id="base2"></div>
                    <div id="base1"></div>
                </div>
            </div>
            <br>
            <div class="gamePlace">
                <div class="List_A">
                    <table id="batterListA">
                    <th colspan="3">Team RED</th>
                    </table>                
                </div>

                <div id="plays">
                    <table id="plays_table">
                        <tr style="display: none;">
                            <td>安打啦</td>
                        </tr>
                        <tr >
                            <td>安打啦</td>
                        </tr>
                    </table>

                </div>

                <div class="List_B">
                    <table id="batterListB">
                    <th colspan="3">Team BLUE</th>
                    </table>
                </div>
            </div>
            <br>
            <input type="button" value="Next" class="submit-btn2" disabled onclick="result()">
            <input type="button" value="Quick End" class="submit-btn2" onclick="end()">
        </div>
    </body>
</html>
